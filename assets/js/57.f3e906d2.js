(window.webpackJsonp=window.webpackJsonp||[]).push([[57],{357:function(s,e,a){"use strict";a.r(e);var t=a(7),r=Object(t.a)({},(function(){var s=this,e=s._self._c;return e("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[e("h1",{attrs:{id:"登录业务踩坑指南"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#登录业务踩坑指南"}},[s._v("#")]),s._v(" 登录业务踩坑指南")]),s._v(" "),e("p",[s._v("这一节的内容较长，遇到的问题也比较多，这里我提供一些思路供大家参考。")]),s._v(" "),e("h3",{attrs:{id:"mock"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#mock"}},[s._v("#")]),s._v(" mock")]),s._v(" "),e("p",[s._v("​\tmock里的user，相当于后台数据接口，若未访问到数据，请检查页面请求时的"),e("code",[s._v("url")]),s._v("和"),e("code",[s._v("user.ts")]),s._v("中的url是否一致。")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v(" url: '/api/user/login',\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("h3",{attrs:{id:"api-user"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#api-user"}},[s._v("#")]),s._v(" api/user")]),s._v(" "),e("p",[s._v("​\t"),e("code",[s._v("src/api/user")]),s._v(" 定义了方法请求的"),e("code",[s._v("方式/参数类型/请求时的url")]),s._v("等。")]),s._v(" "),e("p",[s._v("​\t请注意 环境变量的前缀 + 枚举定义的地址 = mock里user.ts定义的url")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("//src/api/user.ts \nenum API {\n  LOGIN_URL = '/user/login',\n  USERINFO_URL = 'user/info',\n}\n\n//环境变量的前缀,请区别各个环境定义的值\nimport.meta.env.VITE_APP_BASE_API\n\n以上两个组合起来的url一定要和mock里的user.ts的url一样。如：url: '/api/user/login',\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br"),e("span",{staticClass:"line-number"},[s._v("9")]),e("br"),e("span",{staticClass:"line-number"},[s._v("10")]),e("br")])]),e("h3",{attrs:{id:"src-utils-request-ts"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#src-utils-request-ts"}},[s._v("#")]),s._v(" src/utils/request.ts")]),s._v(" "),e("p",[s._v("​\t这个地方就是刚刚提及的获取"),e("code",[s._v("环境变量的前缀")]),s._v("，请注意axios示例的url。是"),e("code",[s._v("/api")]),s._v(" 还是 "),e("code",[s._v("/dev-api")])]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("let request = axios.create({\n  baseURL: import.meta.env.VITE_APP_BASE_API,\n  // baseURL: '/api',\n  timeout: 5000,\n})\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br")])]),e("h3",{attrs:{id:"store-modules-user-ts"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#store-modules-user-ts"}},[s._v("#")]),s._v(" store/modules/user.ts")]),s._v(" "),e("p",[s._v("​\t这个文件就是业务逻辑的处理，成功怎么处理，失败了怎么处理。")])])}),[],!1,null,null,null);e.default=r.exports}}]);