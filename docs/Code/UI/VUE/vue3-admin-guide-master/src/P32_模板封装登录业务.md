# 登录业务踩坑指南



这一节的内容较长，遇到的问题也比较多，这里我提供一些思路供大家参考。

### mock

​	mock里的user，相当于后台数据接口，若未访问到数据，请检查页面请求时的`url`和`user.ts`中的url是否一致。

```
 url: '/api/user/login',
```



### api/user

​	`src/api/user` 定义了方法请求的`方式/参数类型/请求时的url`等。

​	请注意 环境变量的前缀 + 枚举定义的地址 = mock里user.ts定义的url

```
//src/api/user.ts 
enum API {
  LOGIN_URL = '/user/login',
  USERINFO_URL = 'user/info',
}

//环境变量的前缀,请区别各个环境定义的值
import.meta.env.VITE_APP_BASE_API

以上两个组合起来的url一定要和mock里的user.ts的url一样。如：url: '/api/user/login',
```



### src/utils/request.ts

​	这个地方就是刚刚提及的获取`环境变量的前缀`，请注意axios示例的url。是`/api` 还是 `/dev-api`

```
let request = axios.create({
  baseURL: import.meta.env.VITE_APP_BASE_API,
  // baseURL: '/api',
  timeout: 5000,
})
```



### store/modules/user.ts

​	这个文件就是业务逻辑的处理，成功怎么处理，失败了怎么处理。