<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>1.1项目初始化 | Hello VuePress</title>
    <meta name="generator" content="VuePress 1.9.10">
    
    <meta name="description" content="Just playing around">
    
    <link rel="preload" href="/vuepressblog/assets/css/0.styles.5d2f2d54.css" as="style"><link rel="preload" href="/vuepressblog/assets/js/app.77c22008.js" as="script"><link rel="preload" href="/vuepressblog/assets/js/2.f37d4b99.js" as="script"><link rel="preload" href="/vuepressblog/assets/js/1.c6605fe6.js" as="script"><link rel="preload" href="/vuepressblog/assets/js/49.59b9a085.js" as="script"><link rel="prefetch" href="/vuepressblog/assets/js/10.3bc0500e.js"><link rel="prefetch" href="/vuepressblog/assets/js/11.c4a6e2fc.js"><link rel="prefetch" href="/vuepressblog/assets/js/12.5edd7dc0.js"><link rel="prefetch" href="/vuepressblog/assets/js/13.91c53865.js"><link rel="prefetch" href="/vuepressblog/assets/js/14.12c313e8.js"><link rel="prefetch" href="/vuepressblog/assets/js/15.d877ef1e.js"><link rel="prefetch" href="/vuepressblog/assets/js/16.d6460244.js"><link rel="prefetch" href="/vuepressblog/assets/js/17.64f401d0.js"><link rel="prefetch" href="/vuepressblog/assets/js/18.da5d49f9.js"><link rel="prefetch" href="/vuepressblog/assets/js/19.17b33852.js"><link rel="prefetch" href="/vuepressblog/assets/js/20.37e58421.js"><link rel="prefetch" href="/vuepressblog/assets/js/21.2bd1f7b2.js"><link rel="prefetch" href="/vuepressblog/assets/js/22.c3e3a28d.js"><link rel="prefetch" href="/vuepressblog/assets/js/23.43af55fd.js"><link rel="prefetch" href="/vuepressblog/assets/js/24.1a41cb6e.js"><link rel="prefetch" href="/vuepressblog/assets/js/25.a3448d26.js"><link rel="prefetch" href="/vuepressblog/assets/js/26.c88d355a.js"><link rel="prefetch" href="/vuepressblog/assets/js/27.23b577b9.js"><link rel="prefetch" href="/vuepressblog/assets/js/28.5265175a.js"><link rel="prefetch" href="/vuepressblog/assets/js/29.a5c60170.js"><link rel="prefetch" href="/vuepressblog/assets/js/3.caee289f.js"><link rel="prefetch" href="/vuepressblog/assets/js/30.3e5f9a66.js"><link rel="prefetch" href="/vuepressblog/assets/js/31.0a696204.js"><link rel="prefetch" href="/vuepressblog/assets/js/32.ff3063c3.js"><link rel="prefetch" href="/vuepressblog/assets/js/33.25df1576.js"><link rel="prefetch" href="/vuepressblog/assets/js/34.db214d84.js"><link rel="prefetch" href="/vuepressblog/assets/js/35.6223a748.js"><link rel="prefetch" href="/vuepressblog/assets/js/36.86bce77f.js"><link rel="prefetch" href="/vuepressblog/assets/js/37.277dbe3a.js"><link rel="prefetch" href="/vuepressblog/assets/js/38.8083092e.js"><link rel="prefetch" href="/vuepressblog/assets/js/39.858c2138.js"><link rel="prefetch" href="/vuepressblog/assets/js/4.bf1d751f.js"><link rel="prefetch" href="/vuepressblog/assets/js/40.7891e8d5.js"><link rel="prefetch" href="/vuepressblog/assets/js/41.fe522cc8.js"><link rel="prefetch" href="/vuepressblog/assets/js/42.4f847244.js"><link rel="prefetch" href="/vuepressblog/assets/js/43.50f305be.js"><link rel="prefetch" href="/vuepressblog/assets/js/44.e9fa3c6c.js"><link rel="prefetch" href="/vuepressblog/assets/js/45.c5e279d1.js"><link rel="prefetch" href="/vuepressblog/assets/js/46.b8bd90a7.js"><link rel="prefetch" href="/vuepressblog/assets/js/47.5682a637.js"><link rel="prefetch" href="/vuepressblog/assets/js/48.8cc1db97.js"><link rel="prefetch" href="/vuepressblog/assets/js/5.eca1db11.js"><link rel="prefetch" href="/vuepressblog/assets/js/50.abaf981c.js"><link rel="prefetch" href="/vuepressblog/assets/js/51.2c9140cf.js"><link rel="prefetch" href="/vuepressblog/assets/js/52.1843e3f6.js"><link rel="prefetch" href="/vuepressblog/assets/js/53.3cbcb942.js"><link rel="prefetch" href="/vuepressblog/assets/js/54.de99f447.js"><link rel="prefetch" href="/vuepressblog/assets/js/55.06a40728.js"><link rel="prefetch" href="/vuepressblog/assets/js/56.f90b2773.js"><link rel="prefetch" href="/vuepressblog/assets/js/57.f3e906d2.js"><link rel="prefetch" href="/vuepressblog/assets/js/58.9b3f505a.js"><link rel="prefetch" href="/vuepressblog/assets/js/59.54b7064b.js"><link rel="prefetch" href="/vuepressblog/assets/js/6.23ad19d6.js"><link rel="prefetch" href="/vuepressblog/assets/js/60.e35f3fc1.js"><link rel="prefetch" href="/vuepressblog/assets/js/61.a21088fc.js"><link rel="prefetch" href="/vuepressblog/assets/js/62.69fe643e.js"><link rel="prefetch" href="/vuepressblog/assets/js/63.bf2f169b.js"><link rel="prefetch" href="/vuepressblog/assets/js/64.e93951e2.js"><link rel="prefetch" href="/vuepressblog/assets/js/7.43a98834.js"><link rel="prefetch" href="/vuepressblog/assets/js/vendors~docsearch.672a74c5.js">
    <link rel="stylesheet" href="/vuepressblog/assets/css/0.styles.5d2f2d54.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/vuepressblog/" class="home-link router-link-active"><img src="/vuepressblog/assets/img/Italy.png" alt="Hello VuePress" class="logo"> <span class="site-name can-hide">Hello VuePress</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/vuepressblog/" class="nav-link">
  Home
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Code" class="dropdown-title"><span class="title">Code</span> <span class="arrow down"></span></button> <button type="button" aria-label="Code" class="mobile-dropdown-title"><span class="title">Code</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/vuepressblog/Code/ARX/" class="nav-link">
  ARX
</a></li><li class="dropdown-item"><!----> <a href="/vuepressblog/Code/JAVA/" class="nav-link">
  JAVA
</a></li><li class="dropdown-item"><h4>
          Programminglanguage
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/vuepressblog/Code/Programminglanguage/Python/" class="nav-link">
  Python
</a></li></ul></li><li class="dropdown-item"><h4>
          UI
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/vuepressblog/Code/UI/VUE/" class="nav-link router-link-active">
  Vue3-UI库学习
</a></li></ul></li></ul></div></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/vuepressblog/" class="nav-link">
  Home
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Code" class="dropdown-title"><span class="title">Code</span> <span class="arrow down"></span></button> <button type="button" aria-label="Code" class="mobile-dropdown-title"><span class="title">Code</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/vuepressblog/Code/ARX/" class="nav-link">
  ARX
</a></li><li class="dropdown-item"><!----> <a href="/vuepressblog/Code/JAVA/" class="nav-link">
  JAVA
</a></li><li class="dropdown-item"><h4>
          Programminglanguage
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/vuepressblog/Code/Programminglanguage/Python/" class="nav-link">
  Python
</a></li></ul></li><li class="dropdown-item"><h4>
          UI
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/vuepressblog/Code/UI/VUE/" class="nav-link router-link-active">
  Vue3-UI库学习
</a></li></ul></li></ul></div></div> <!----></nav>  <ul class="sidebar-links"><li><a href="/vuepressblog/Code/UI/VUE/MFC使用cef.html" class="sidebar-link">编译CEF</a></li><li><a href="/vuepressblog/Code/UI/VUE/mockjs.html" class="sidebar-link">在线mock网站fastmock</a></li><li><a href="/vuepressblog/Code/UI/VUE/Vue3-UI库学习.html" class="sidebar-link">关于Vue3 UI库</a></li><li><a href="/vuepressblog/Code/UI/VUE/VUEPRESS安装.html" class="sidebar-link">安装Yarn</a></li><li><a href="/vuepressblog/Code/UI/VUE/VUE组件打包.html" class="sidebar-link">实现组件的全量打包</a></li><li><a href="/vuepressblog/Code/UI/VUE/vue3-admin-guide-master/src/" aria-current="page" class="sidebar-link">文件类目</a></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h3 id="_1-1项目初始化"><a href="#_1-1项目初始化" class="header-anchor">#</a> 1.1项目初始化</h3> <p>今天来带大家从0开始搭建一个vue3版本的后台管理系统。一个项目要有统一的规范，需要使用eslint+stylelint+prettier来对我们的代码质量做检测和修复，需要使用husky来做commit拦截，需要使用commitlint来统一提交规范，需要使用preinstall来统一包管理工具。</p> <p>下面我们就用这一套规范来初始化我们的项目，集成一个规范的模版。</p> <h4 id="_1-1-1环境准备"><a href="#_1-1-1环境准备" class="header-anchor">#</a> 1.1.1环境准备</h4> <ul><li>node v16.14.2</li> <li>pnpm 8.0.0</li></ul> <h4 id="_1-1-2初始化项目"><a href="#_1-1-2初始化项目" class="header-anchor">#</a> 1.1.2初始化项目</h4> <p>本项目使用vite进行构建，vite官方中文文档参考：<a href="https://cn.vitejs.dev/guide/" target="_blank" rel="noopener noreferrer">cn.vitejs.dev/guide/<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p><strong>pnpm:performant npm ，意味“高性能的 npm”。<a href="https://so.csdn.net/so/search?q=pnpm&amp;spm=1001.2101.3001.7020" target="_blank" rel="noopener noreferrer">pnpm<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>由npm/yarn衍生而来，解决了npm/yarn内部潜在的bug，极大的优化了性能，扩展了使用场景。被誉为“最先进的包管理工具”</strong></p> <p>pnpm安装指令</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>npm i -g pnpm
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>项目初始化命令:</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>pnpm create vite
pnpm install
pnpm run dev
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>进入到项目根目录pnpm install安装全部依赖.安装完依赖运行程序:pnpm run dev</p> <p>运行完毕项目跑在http://127.0.0.1:5173/,可以访问你得项目啦</p> <h3 id="_1-2项目配置"><a href="#_1-2项目配置" class="header-anchor">#</a> 1.2项目配置</h3> <h4 id="一、eslint配置"><a href="#一、eslint配置" class="header-anchor">#</a> 一、eslint配置</h4> <p><strong>eslint中文官网:http://eslint.cn/</strong></p> <p>ESLint最初是由<a href="http://nczonline.net/" target="_blank" rel="noopener noreferrer">Nicholas C. Zakas<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> 于2013年6月创建的开源项目。它的目标是提供一个插件化的<strong>javascript代码检测工具</strong></p> <p>首先安装eslint</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>pnpm i eslint -D
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>生成配置文件:.eslint.cjs</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>npx eslint --init
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p><strong>.eslint.cjs配置文件</strong></p> <div class="language- line-numbers-mode"><pre class="language-text"><code>module.exports = {
   //运行环境
    &quot;env&quot;: { 
        &quot;browser&quot;: true,//浏览器端
        &quot;es2021&quot;: true,//es2021
    },
    //规则继承
    &quot;extends&quot;: [ 
       //全部规则默认是关闭的,这个配置项开启推荐规则,推荐规则参照文档
       //比如:函数不能重名、对象不能出现重复key
        &quot;eslint:recommended&quot;,
        //vue3语法规则
        &quot;plugin:vue/vue3-essential&quot;,
        //ts语法规则
        &quot;plugin:@typescript-eslint/recommended&quot;
    ],
    //要为特定类型的文件指定处理器
    &quot;overrides&quot;: [
    ],
    //指定解析器:解析器
    //Esprima 默认解析器
    //Babel-ESLint babel解析器
    //@typescript-eslint/parser ts解析器
    &quot;parser&quot;: &quot;@typescript-eslint/parser&quot;,
    //指定解析器选项
    &quot;parserOptions&quot;: {
        &quot;ecmaVersion&quot;: &quot;latest&quot;,//校验ECMA最新版本
        &quot;sourceType&quot;: &quot;module&quot;//设置为&quot;script&quot;（默认），或者&quot;module&quot;代码在ECMAScript模块中
    },
    //ESLint支持使用第三方插件。在使用插件之前，您必须使用npm安装它
    //该eslint-plugin-前缀可以从插件名称被省略
    &quot;plugins&quot;: [
        &quot;vue&quot;,
        &quot;@typescript-eslint&quot;
    ],
    //eslint规则
    &quot;rules&quot;: {
    }
}
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br></div></div><h5 id="_1-1vue3环境代码校验插件"><a href="#_1-1vue3环境代码校验插件" class="header-anchor">#</a> 1.1vue3环境代码校验插件</h5> <div class="language- line-numbers-mode"><pre class="language-text"><code>#让所有与prettier规则存在冲突的Eslint rules失效，并使用prettier进行代码检查
&quot;eslint-config-prettier&quot;: &quot;^8.6.0&quot;,
&quot;eslint-plugin-import&quot;: &quot;^2.27.5&quot;,
&quot;eslint-plugin-node&quot;: &quot;^11.1.0&quot;,
# 运行更漂亮的Eslint，使prettier规则优先级更高，Eslint优先级低 
&quot;eslint-plugin-prettier&quot;: &quot;^4.2.1&quot;,
# vue.js的Eslint插件（查找vue语法错误，发现错误指令，查找违规风格指南
&quot;eslint-plugin-vue&quot;: &quot;^9.9.0&quot;,
# 该解析器允许使用Eslint校验所有babel code
&quot;@babel/eslint-parser&quot;: &quot;^7.19.1&quot;,
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><p>安装指令</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>pnpm install -D eslint-plugin-import eslint-plugin-vue eslint-plugin-node eslint-plugin-prettier eslint-config-prettier eslint-plugin-node @babel/eslint-parser
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h5 id="_1-2修改-eslintrc-cjs配置文件"><a href="#_1-2修改-eslintrc-cjs配置文件" class="header-anchor">#</a> 1.2修改.eslintrc.cjs配置文件</h5> <div class="language- line-numbers-mode"><pre class="language-text"><code>// @see https://eslint.bootcss.com/docs/rules/

module.exports = {
  env: {
    browser: true,
    es2021: true,
    node: true,
    jest: true,
  },
  /* 指定如何解析语法 */
  parser: 'vue-eslint-parser',
  /** 优先级低于 parse 的语法解析配置 */
  parserOptions: {
    ecmaVersion: 'latest',
    sourceType: 'module',
    parser: '@typescript-eslint/parser',
    jsxPragma: 'React',
    ecmaFeatures: {
      jsx: true,
    },
  },
  /* 继承已有的规则 */
  extends: [
    'eslint:recommended',
    'plugin:vue/vue3-essential',
    'plugin:@typescript-eslint/recommended',
    'plugin:prettier/recommended',
  ],
  plugins: ['vue', '@typescript-eslint'],
  /*
   * &quot;off&quot; 或 0    ==&gt;  关闭规则
   * &quot;warn&quot; 或 1   ==&gt;  打开的规则作为警告（不影响代码执行）
   * &quot;error&quot; 或 2  ==&gt;  规则作为一个错误（代码不能执行，界面报错）
   */
  rules: {
    // eslint（https://eslint.bootcss.com/docs/rules/）
    'no-var': 'error', // 要求使用 let 或 const 而不是 var
    'no-multiple-empty-lines': ['warn', { max: 1 }], // 不允许多个空行
    'no-console': process.env.NODE_ENV === 'production' ? 'error' : 'off',
    'no-debugger': process.env.NODE_ENV === 'production' ? 'error' : 'off',
    'no-unexpected-multiline': 'error', // 禁止空余的多行
    'no-useless-escape': 'off', // 禁止不必要的转义字符

    // typeScript (https://typescript-eslint.io/rules)
    '@typescript-eslint/no-unused-vars': 'error', // 禁止定义未使用的变量
    '@typescript-eslint/prefer-ts-expect-error': 'error', // 禁止使用 @ts-ignore
    '@typescript-eslint/no-explicit-any': 'off', // 禁止使用 any 类型
    '@typescript-eslint/no-non-null-assertion': 'off',
    '@typescript-eslint/no-namespace': 'off', // 禁止使用自定义 TypeScript 模块和命名空间。
    '@typescript-eslint/semi': 'off',

    // eslint-plugin-vue (https://eslint.vuejs.org/rules/)
    'vue/multi-word-component-names': 'off', // 要求组件名称始终为 “-” 链接的单词
    'vue/script-setup-uses-vars': 'error', // 防止&lt;script setup&gt;使用的变量&lt;template&gt;被标记为未使用
    'vue/no-mutating-props': 'off', // 不允许组件 prop的改变
    'vue/attribute-hyphenation': 'off', // 对模板中的自定义组件强制执行属性命名样式
  },
}

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br></div></div><h5 id="_1-3-eslintignore忽略文件"><a href="#_1-3-eslintignore忽略文件" class="header-anchor">#</a> 1.3.eslintignore忽略文件</h5> <div class="language- line-numbers-mode"><pre class="language-text"><code>dist
node_modules
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h5 id="_1-4运行脚本"><a href="#_1-4运行脚本" class="header-anchor">#</a> 1.4运行脚本</h5> <p>package.json新增两个运行脚本</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>&quot;scripts&quot;: {
    &quot;lint&quot;: &quot;eslint src&quot;,
    &quot;fix&quot;: &quot;eslint src --fix&quot;,
}
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h4 id="二、配置prettier"><a href="#二、配置prettier" class="header-anchor">#</a> 二、配置<strong>prettier</strong></h4> <p>有了eslint，为什么还要有prettier？eslint针对的是javascript，他是一个检测工具，包含js语法以及少部分格式问题，在eslint看来，语法对了就能保证代码正常运行，格式问题属于其次；</p> <p>而prettier属于格式化工具，它看不惯格式不统一，所以它就把eslint没干好的事接着干，另外，prettier支持</p> <p>包含js在内的多种语言。</p> <p>总结起来，<strong>eslint和prettier这俩兄弟一个保证js代码质量，一个保证代码美观。</strong></p> <h5 id="_2-1安装依赖包"><a href="#_2-1安装依赖包" class="header-anchor">#</a> 2.1安装依赖包</h5> <div class="language- line-numbers-mode"><pre class="language-text"><code>pnpm install -D eslint-plugin-prettier prettier eslint-config-prettier
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h5 id="_2-2-prettierrc-json添加规则"><a href="#_2-2-prettierrc-json添加规则" class="header-anchor">#</a> 2.2.prettierrc.json添加规则</h5> <div class="language- line-numbers-mode"><pre class="language-text"><code>{
  &quot;singleQuote&quot;: true,
  &quot;semi&quot;: false,
  &quot;bracketSpacing&quot;: true,
  &quot;htmlWhitespaceSensitivity&quot;: &quot;ignore&quot;,
  &quot;endOfLine&quot;: &quot;auto&quot;,
  &quot;trailingComma&quot;: &quot;all&quot;,
  &quot;tabWidth&quot;: 2
}
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><h5 id="_2-3-prettierignore忽略文件"><a href="#_2-3-prettierignore忽略文件" class="header-anchor">#</a> 2.3.prettierignore忽略文件</h5> <div class="language- line-numbers-mode"><pre class="language-text"><code>/dist/*
/html/*
.local
/node_modules/**
**/*.svg
**/*.sh
/public/*
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p><strong>通过pnpm run lint去检测语法，如果出现不规范格式,通过pnpm run fix 修改</strong></p> <h4 id="三、配置stylelint"><a href="#三、配置stylelint" class="header-anchor">#</a> 三、配置stylelint</h4> <p><a href="https://stylelint.io/" target="_blank" rel="noopener noreferrer">stylelint<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>为css的lint工具。可格式化css代码，检查css语法错误与不合理的写法，指定css书写顺序等。</p> <p>我们的项目中使用scss作为预处理器，安装以下依赖：</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>pnpm add sass sass-loader stylelint postcss postcss-scss postcss-html stylelint-config-prettier stylelint-config-recess-order stylelint-config-recommended-scss stylelint-config-standard stylelint-config-standard-vue stylelint-scss stylelint-order stylelint-config-standard-scss -D
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h5 id="_3-1-stylelintrc-cjs配置文件"><a href="#_3-1-stylelintrc-cjs配置文件" class="header-anchor">#</a> 3.1<code>.stylelintrc.cjs</code><strong>配置文件</strong></h5> <p><strong>官网:https://stylelint.bootcss.com/</strong></p> <div class="language- line-numbers-mode"><pre class="language-text"><code>// @see https://stylelint.bootcss.com/

module.exports = {
  extends: [
    'stylelint-config-standard', // 配置stylelint拓展插件
    'stylelint-config-html/vue', // 配置 vue 中 template 样式格式化
    'stylelint-config-standard-scss', // 配置stylelint scss插件
    'stylelint-config-recommended-vue/scss', // 配置 vue 中 scss 样式格式化
    'stylelint-config-recess-order', // 配置stylelint css属性书写顺序插件,
    'stylelint-config-prettier', // 配置stylelint和prettier兼容
  ],
  overrides: [
    {
      files: ['**/*.(scss|css|vue|html)'],
      customSyntax: 'postcss-scss',
    },
    {
      files: ['**/*.(html|vue)'],
      customSyntax: 'postcss-html',
    },
  ],
  ignoreFiles: [
    '**/*.js',
    '**/*.jsx',
    '**/*.tsx',
    '**/*.ts',
    '**/*.json',
    '**/*.md',
    '**/*.yaml',
  ],
  /**
   * null  =&gt; 关闭该规则
   * always =&gt; 必须
   */
  rules: {
    'value-keyword-case': null, // 在 css 中使用 v-bind，不报错
    'no-descending-specificity': null, // 禁止在具有较高优先级的选择器后出现被其覆盖的较低优先级的选择器
    'function-url-quotes': 'always', // 要求或禁止 URL 的引号 &quot;always(必须加上引号)&quot;|&quot;never(没有引号)&quot;
    'no-empty-source': null, // 关闭禁止空源码
    'selector-class-pattern': null, // 关闭强制选择器类名的格式
    'property-no-unknown': null, // 禁止未知的属性(true 为不允许)
    'block-opening-brace-space-before': 'always', //大括号之前必须有一个空格或不能有空白符
    'value-no-vendor-prefix': null, // 关闭 属性值前缀 --webkit-box
    'property-no-vendor-prefix': null, // 关闭 属性前缀 -webkit-mask
    'selector-pseudo-class-no-unknown': [
      // 不允许未知的选择器
      true,
      {
        ignorePseudoClasses: ['global', 'v-deep', 'deep'], // 忽略属性，修改element默认样式的时候能使用到
      },
    ],
  },
}
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br></div></div><h5 id="_3-2-stylelintignore忽略文件"><a href="#_3-2-stylelintignore忽略文件" class="header-anchor">#</a> 3.2.stylelintignore忽略文件</h5> <div class="language- line-numbers-mode"><pre class="language-text"><code>/node_modules/*
/dist/*
/html/*
/public/*
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h5 id="_3-3运行脚本"><a href="#_3-3运行脚本" class="header-anchor">#</a> 3.3运行脚本</h5> <div class="language- line-numbers-mode"><pre class="language-text"><code>&quot;scripts&quot;: {
	&quot;lint:style&quot;: &quot;stylelint src/**/*.{css,scss,vue} --cache --fix&quot;
}
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>最后配置统一的prettier来格式化我们的js和css，html代码</p> <div class="language- line-numbers-mode"><pre class="language-text"><code> &quot;scripts&quot;: {
    &quot;dev&quot;: &quot;vite --open&quot;,
    &quot;build&quot;: &quot;vue-tsc &amp;&amp; vite build&quot;,
    &quot;preview&quot;: &quot;vite preview&quot;,
    &quot;lint&quot;: &quot;eslint src&quot;,
    &quot;fix&quot;: &quot;eslint src --fix&quot;,
    &quot;format&quot;: &quot;prettier --write \&quot;./**/*.{html,vue,ts,js,json,md}\&quot;&quot;,
    &quot;lint:eslint&quot;: &quot;eslint src/**/*.{ts,vue} --cache --fix&quot;,
    &quot;lint:style&quot;: &quot;stylelint src/**/*.{css,scss,vue} --cache --fix&quot;
  },
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><p><strong>当我们运行<code>pnpm run format</code>的时候，会把代码直接格式化</strong></p> <h4 id="四、配置husky"><a href="#四、配置husky" class="header-anchor">#</a> 四、配置husky</h4> <p>在上面我们已经集成好了我们代码校验工具，但是需要每次手动的去执行命令才会格式化我们的代码。如果有人没有格式化就提交了远程仓库中，那这个规范就没什么用。所以我们需要强制让开发人员按照代码规范来提交。</p> <p>要做到这件事情，就需要利用husky在代码提交之前触发git hook(git在客户端的钩子)，然后执行<code>pnpm run format</code>来自动的格式化我们的代码。</p> <p>安装<code>husky</code></p> <div class="language- line-numbers-mode"><pre class="language-text"><code>pnpm install -D husky
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>执行</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>npx husky-init
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>会在根目录下生成个一个.husky目录，在这个目录下面会有一个pre-commit文件，这个文件里面的命令在我们执行commit的时候就会执行</p> <p>在<code>.husky/pre-commit</code>文件添加如下命令：</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>#!/usr/bin/env sh
. &quot;$(dirname -- &quot;$0&quot;)/_/husky.sh&quot;
pnpm run format
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>当我们对代码进行commit操作的时候，就会执行命令，对代码进行格式化，然后再提交。</p> <h4 id="五、配置commitlint"><a href="#五、配置commitlint" class="header-anchor">#</a> 五、配置commitlint</h4> <p>对于我们的commit信息，也是有统一规范的，不能随便写,要让每个人都按照统一的标准来执行，我们可以利用<strong>commitlint</strong>来实现。</p> <p>安装包</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>pnpm add @commitlint/config-conventional @commitlint/cli -D
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>添加配置文件，新建<code>commitlint.config.cjs</code>(注意是cjs)，然后添加下面的代码：</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>module.exports = {
  extends: ['@commitlint/config-conventional'],
  // 校验规则
  rules: {
    'type-enum': [
      2,
      'always',
      [
        'feat',
        'fix',
        'docs',
        'style',
        'refactor',
        'perf',
        'test',
        'chore',
        'revert',
        'build',
      ],
    ],
    'type-case': [0],
    'type-empty': [0],
    'scope-empty': [0],
    'scope-case': [0],
    'subject-full-stop': [0, 'never'],
    'subject-case': [0, 'never'],
    'header-max-length': [0, 'always', 72],
  },
}
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br></div></div><p>在<code>package.json</code>中配置scripts命令</p> <div class="language- line-numbers-mode"><pre class="language-text"><code># 在scrips中添加下面的代码
{
&quot;scripts&quot;: {
    &quot;commitlint&quot;: &quot;commitlint --config commitlint.config.cjs -e -V&quot;
  },
}
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>配置结束，现在当我们填写<code>commit</code>信息的时候，前面就需要带着下面的<code>subject</code></p> <div class="language- line-numbers-mode"><pre class="language-text"><code>'feat',//新特性、新功能
'fix',//修改bug
'docs',//文档修改
'style',//代码格式修改, 注意不是 css 修改
'refactor',//代码重构
'perf',//优化相关，比如提升性能、体验
'test',//测试用例修改
'chore',//其他修改, 比如改变构建流程、或者增加依赖库、工具等
'revert',//回滚到上一个版本
'build',//编译相关的修改，例如发布版本、对项目构建或者依赖的改动
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><p>配置husky</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>npx husky add .husky/commit-msg 
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>在生成的commit-msg文件中添加下面的命令</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>#!/usr/bin/env sh
. &quot;$(dirname -- &quot;$0&quot;)/_/husky.sh&quot;
pnpm commitlint
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>当我们 commit 提交信息时，就不能再随意写了，必须是 git commit -m 'fix: xxx' 符合类型的才可以，<strong>需要注意的是类型的后面需要用英文的 :，并且冒号后面是需要空一格的，这个是不能省略的</strong></p> <h4 id="六、强制使用pnpm包管理器工具"><a href="#六、强制使用pnpm包管理器工具" class="header-anchor">#</a> 六、强制使用pnpm包管理器工具</h4> <p>团队开发项目的时候，需要统一包管理器工具,因为不同包管理器工具下载同一个依赖,可能版本不一样,</p> <p>导致项目出现bug问题,因此包管理器工具需要统一管理！！！</p> <p>在根目录创建<code>scritps/preinstall.js</code>文件，添加下面的内容</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>if (!/pnpm/.test(process.env.npm_execpath || '')) {
  console.warn(
    `\u001b[33mThis repository must using pnpm as the package manager ` +
    ` for scripts to work properly.\u001b[39m\n`,
  )
  process.exit(1)
}
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p>配置命令</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>&quot;scripts&quot;: {
	&quot;preinstall&quot;: &quot;node ./scripts/preinstall.js&quot;
}
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p><strong>当我们使用npm或者yarn来安装包的时候，就会报错了。原理就是在install的时候会触发preinstall（npm提供的生命周期钩子）这个文件里面的代码。</strong></p></div> <footer class="page-edit"><!----> <!----></footer> <!----> </main></div><div class="global-ui"><!----></div></div>
    <script src="/vuepressblog/assets/js/app.77c22008.js" defer></script><script src="/vuepressblog/assets/js/2.f37d4b99.js" defer></script><script src="/vuepressblog/assets/js/1.c6605fe6.js" defer></script><script src="/vuepressblog/assets/js/49.59b9a085.js" defer></script>
  </body>
</html>
